<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>수입 작성 : 돈매니저</title>
    <!-- css -->
    <link rel="stylesheet" th:href="@{/css/write.css}">
    <!-- js -->
    <script th:src="@{/js/write.js}"></script>
</head>
<body>
<nav th:replace="/include/menu.html :: menu"></nav>
<form id="write" enctype="multipart/form-data">
        <div id="wContent">
            <div class="title">
                [[${formatDate}]]<br>
                <span>수입</span>
            </div>
            <div class="wMain">
                <div class="wArea fixs">
                    <h3 class="write_title">
                        <label>고정/변동</label>
                    </h3>
                    <div th:style="${'display: inline-block;'}">
                        <div th:onchange="showOption()">
                            <label><input type="radio" name="fix" id="fix" th:value="${'y'}"> 고정</label>
                            <label><input type="radio" name="fix" th:value="${'n'}" checked> 변동</label>
                        </div>
                        <div id="fixOption" th:style="${'padding-top: 20px;'}">
                            <label><input type="radio" name="fixOption" class="fixCycle" th:value="y">일년</label>
                            <label><input type="radio" name="fixOption" class="fixCycle" th:value="m">한달</label>
                            <label><input type="radio" name="fixOption" class="fixCycle" th:value="w">일주일</label>
                        </div>
                    </div>
                </div>

                <div class="wArea">
                    <h3 class="write_title">
                        <label>카테고리</label>
                    </h3>
                    <select name="categoryL" class="wCategory">
                        <option th:value="${'00'}">선택없음</option>
                        <option th:value="${'01'}">현금</option>
                        <option th:value="${'02'}">카드</option>
                        <option th:value="${'03'}">계좌</option>
                    </select>
                    <select name="categoryM" class="wCategory">
                        <option th:value="${'00'}">선택없음</option>
                        <option th:value="${01}">월급</option>
                        <option th:value="${02}">용돈</option>
                        <option th:value="${03}">알바</option>
                    </select>
                </div>

                <div class="wArea">
                    <h3 class="write_title">
                        <label>제목</label>
                    </h3>
                    <input type="text" placeholder="제목을 입력해주세요." name="title" class="wTitle" maxlength="50">
                </div>

                <div class="wArea wContent">
                    <h3 class="write_title">
                        <label>내용</label>
                    </h3>
                    <textarea cols="60" rows="5" placeholder="내용을 입력해주세요." name="content" maxlength="300"></textarea>
                </div>

                <div class="wArea">
                    <h3 class="write_title">
                        <label>금액</label>
                    </h3>
                    <input type="text" placeholder="금액을 입력해주세요." name="price" class="wPrice" th:onkeyup="checkPrice( this )">
                </div>

                <div class="wArea">
                    <h3 class="write_title">
                        <label>사진</label>
                    </h3>
                    <label><input type="file" name="" th:style="${'display:none;'}" class="img"><img src="/image/imageUnLock.png" id="img0" th:style="${'cursor: pointer'}"/></label>
                    <label><input type="file" name="" th:style="${'display:none;'}" class="img"><img src="/image/imageLock.png" id="img1"/></label>
                    <label><input type="file" name="" th:style="${'display:none;'}" class="img"><img src="/image/imageLock.png" id="img2"/></label>
                    <script>
                        let img = document.querySelectorAll('.img');
                        for( let i=0; i < img.length; i++ ) {
                            img[i].addEventListener("change", function() {
                                if( this.files && this.files[0] ) {
                                    let reader = new FileReader();
                                    reader.onload = function(e) {
                                        document.getElementById('img' + i).src = e.target.result;
                                    };
                                    reader.readAsDataURL(this.files[0]);
                                } else{
                                    document.getElementById('img' + i).src = '/image/imageUnLock.png';
                                }
                            });
                        }
                    </script>
                </div>

                <div class="wArea">
                    <h3 class="write_title">
                        <label>위치</label>
                    </h3>
                    <img src="/image/location.png" class="map" onclick="openMapPop()">
                    <label id="mapInput">위치를 입력해주세요.</label>
                    <div id="location">
                        <span id="mapName"></span><br>
                        <span id="mapRoad"></span><br>
                        <span id="mapAddr"></span>
                    </div>
                </div>
            </div>
            <div id="btnGroup">
                <button type="button" class="btn cancel"  onclick="history.back()">이전</button>
                <button class="btn confirm" >완료</button>
            </div>
        </div>
</form>
</body>
</html>